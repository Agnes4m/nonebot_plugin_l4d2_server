<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>已加载服务器</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: url('../back_img/background.jpg') repeat;
            background-size: cover;
            /* filter: blur(12px) brightness(0.6); */
        }
    </style>
</head>

<body>
    <div class="outer-frame">
        <div class="container">
            <h1>已加载服务器 {{ servers[1].command }} (共 {{ servers|length }} 台)</h1>

            <div class="server-grid">
                {% for server in servers %}
                <div class="server-card">
                    <div class="server-name" title="{{ server.server.server_name }}">
                        {{ server.command }}{{ server.id_ }}:{{ server.server.server_name }}
                    </div>

                    <div class="map-name">
                        <span>🌎️</span>
                        <span>{{ server.server.map_name }}</span>
                        <label class="switch">
                            <input class="checkbox" type="checkbox" {% if server.enabled %} checked {% endif %} />
                            <span
                                class="slider round {% if server.server.player_count >= server.server.max_players %} locked {% endif %}">
                                <span
                                    class="lock {% if server.server.player_count >= server.server.max_players %} locked {% endif %}"></span>
                                <span
                                    class="status_text {% if server.server.max_players == 0 %}error{% elif server.server.player_count == 0 %}none{% elif server.server.player_count / server.server.max_players < 0.5 %}lack{% elif server.server.player_count >= server.server.max_players %}full{% else %}not_full{% endif %}">
                                    {% if server.server.max_players == 0 %}
                                    错误
                                    {% elif server.server.player_count == 0 %}
                                    无人
                                    {% elif server.server.player_count / server.server.max_players < 0.5 %} 缺人 {% elif
                                        server.server.player_count>= server.server.max_players
                                        %}
                                        已满
                                        {% else %}
                                        未满
                                        {% endif %}
                                </span>
                            </span>
                        </label>
                    </div>

                    <div class="player-list">
                        {% set player_count = server.player|length %}
                        {% for i in range(max_count) %}
                        {% set player = server.player[i] if i < player_count else None %} {% if player and player.name
                            %} <div class="player-item">
                            <span class="player-score">【{{ player.score }}】</span>
                            <span class="player-name">{{ player.name }}</span>

                    </div>
                    {% endif %}
                    {% endfor %}

                    <div class="players">
                        <span class="status-indicator">
                            {% if server.server.player_count >= 0 %}
                            {% if server.server.max_players == 0 %}
                            <span class="offline">🔴</span>
                            {% elif server.server.player_count / server.server.max_players < 0.5 %} <span
                                class="online">🟢</span>
                        {% elif server.server.player_count >= server.server.max_players %}
                        <span class="warning">🟡</span>
                        {% else %}
                        <span class="online">🔵</span>
                        {% endif %}
                        <span class="player-count">{{ server.server.player_count }}/{{ server.server.max_players
                            }}</span>
                        {% else %}
                        <span class="offline">🔴 错误</span>
                        {% endif %}
                        </span>

                        <span class="server-meta">
                            <span class="server-icon">
                                <img src="{{ server.server.platform }}.svg" alt="平台">
                            </span>
                            {% if server.server.vac_enabled %}
                            <span class="server-icon">
                                <img src="vac.png" alt="VAC保护">
                            </span>
                            {% endif %}
                        </span>
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="footer">
            @Anges Digital & Nonebot2
        </div>
    </div>
    </div>
</body>

</html>