<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Anneäº‘æœæœåŠ¡å™¨çŠ¶æ€</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: url('../back_img/background.jpg') repeat;
            background-size: cover;
                filter: blur(12px) brightness(0.6);
        }
    </style>
</head>

<body> 
    <div class="outer-frame">
        <div class="container">
            <h1>Anneäº‘æœæœåŠ¡å™¨çŠ¶æ€ (å…± {{ servers|length }} å°)</h1>

            <div class="server-grid">
                {% for server in servers %}
                <div class="server-card">
                    <div class="server-name" title="{{ server.server.server_name }}">
                        {{ server.server.server_name|replace('\n', ' ')|replace(' ', ' ')|trim }}
                    </div>

                    <div class="map-name">
                        <span>ğŸ—ºï¸</span>
                        <span>{{ server.server.map_name }}</span>
                    </div>

                    <div class="players">
                        <span class="status-indicator">
                            {% if server.server.player_count >= 0 %}
                                {% if server.server.max_players == 0 %}
                                    <span class="offline">ğŸ”´</span>
                                {% elif server.server.player_count / server.server.max_players < 0.5 %}
                                    <span class="online">ğŸŸ¢</span>
                                {% elif server.server.player_count >= server.server.max_players %}
                                    <span class="warning">ğŸŸ¡</span>
                                {% else %}
                                    <span class="online">ğŸ”µ</span>
                                {% endif %}
                                <span class="player-count">{{ server.server.player_count }}/{{ server.server.max_players }}</span>
                            {% else %}
                                <span class="offline">ğŸ”´ é”™è¯¯</span>
                            {% endif %}
                        </span>

                        <span class="server-meta">
                            <span class="server-meta-item">
                                <img src="{{ server.server.platform }}.svg" alt="å¹³å°">
                            </span>
                            {% if server.server.vac_enabled %}
                            <span class="server-meta-item">
                                <img src="vac.png" alt="VACä¿æŠ¤">
                            </span>
                            {% endif %}
                            <span class="server-meta-item ping-value">
                                {{ (server.server.ping * 1000)|round(1) }} ms
                            </span>
                        </span>
                    </div>

                    <div class="player-list">
                        {% set player_count = server.player|length %}
                        {% for i in range(max_count) %}
                            {% set player = server.player[i] if i < player_count else None %}
                            {% if player and player.name %}
                                <div class="player-item">
                                    <span class="player-name">{{ player.name }}</span>
                                    <span class="player-score">{{ player.score }}</span>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="footer">
                @Anges Digital & Nonebot2
            </div>
        </div>
    </div>
</body>
</html>